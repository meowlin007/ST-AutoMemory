<div class="auto-memory-container">
    <div class="auto-memory-header">
        <div class="auto-memory-title">AutoMemory Settings</div>
        <div>
            <button class="memory-btn refresh" id="refreshMemories">‡∏£‡∏µ‡πÄ‡∏ü‡∏£‡∏ä</button>
            <button class="memory-btn clear" id="clearAllMemories">‡∏•‡πâ‡∏≤‡∏á‡∏ó‡∏±‡πâ‡∏á‡∏´‡∏°‡∏î</button>
        </div>
    </div>
    
    <div class="memory-stats">
        <span><i>üß†</i> <span id="memoryCount">0</span> ‡∏Ñ‡∏ß‡∏≤‡∏°‡∏ó‡∏£‡∏á‡∏à‡∏≥</span>
        <span><i>‚è±Ô∏è</i> ‡∏≠‡∏±‡∏û‡πÄ‡∏î‡∏ó‡∏•‡πà‡∏≤‡∏™‡∏∏‡∏î: <span id="lastUpdate">-</span></span>
    </div>
    
    <div class="auto-memory-content" id="memoriesList">
        <div class="no-memories">‡∏¢‡∏±‡∏á‡πÑ‡∏°‡πà‡∏°‡∏µ‡∏Ñ‡∏ß‡∏≤‡∏°‡∏ó‡∏£‡∏á‡∏à‡∏≥‡∏ñ‡∏π‡∏Å‡∏ö‡∏±‡∏ô‡∏ó‡∏∂‡∏Å</div>
    </div>
    
    <div class="settings-section">
        <h3>‡∏Å‡∏≤‡∏£‡∏ï‡∏±‡πâ‡∏á‡∏Ñ‡πà‡∏≤‡πÄ‡∏û‡∏¥‡πà‡∏°‡πÄ‡∏ï‡∏¥‡∏°</h3>
        <div class="setting-item">
            <label>
                <input type="checkbox" id="showFloatingButton" checked>
                ‡πÅ‡∏™‡∏î‡∏á‡∏õ‡∏∏‡πà‡∏°‡∏•‡∏≠‡∏¢‡∏ï‡∏±‡∏ß
            </label>
        </div>
        <div class="setting-item">
            <label>
                ‡πÇ‡∏ü‡∏•‡πÄ‡∏î‡∏≠‡∏£‡πå World Info:
                <input type="text" id="worldInfoFolder" value="AutoMemory">
            </label>
        </div>
        <button class="memory-btn save-settings" id="saveSettings">‡∏ö‡∏±‡∏ô‡∏ó‡∏∂‡∏Å‡∏Å‡∏≤‡∏£‡∏ï‡∏±‡πâ‡∏á‡∏Ñ‡πà‡∏≤</button>
    </div>
</div>

<style>
    .settings-section {
        margin-top: 20px;
        padding: 15px;
        background: #3a3a4a;
        border-radius: 8px;
    }
    
    .setting-item {
        margin: 10px 0;
    }
    
    .setting-item input[type="text"] {
        padding: 5px;
        background: #2d2d3a;
        border: 1px solid #444;
        border-radius: 4px;
        color: white;
        width: 200px;
    }
    
    .save-settings {
        background: #4CAF50;
        color: white;
        margin-top: 10px;
    }
</style>

<script>
    document.addEventListener('DOMContentLoaded', function() {
        // ‡∏ô‡∏±‡∏ö‡∏à‡∏≥‡∏ô‡∏ß‡∏ô memories
        function updateMemoryCount() {
            const count = document.querySelectorAll('.memory-entry').length;
            document.getElementById('memoryCount').textContent = count;
            document.getElementById('lastUpdate').textContent = new Date().toLocaleTimeString('th-TH');
        }
        
        // ‡∏£‡∏µ‡πÄ‡∏ü‡∏£‡∏ä memories
        document.getElementById('refreshMemories').addEventListener('click', function() {
            if (typeof refreshMemoryPanel === 'function') {
                refreshMemoryPanel();
                updateMemoryCount();
            }
        });
        
        // ‡∏•‡πâ‡∏≤‡∏á memories ‡∏ó‡∏±‡πâ‡∏á‡∏´‡∏°‡∏î
        document.getElementById('clearAllMemories').addEventListener('click', function() {
            if (typeof clearAllMemories === 'function') {
                clearAllMemories();
            }
        });
        
        // ‡∏ö‡∏±‡∏ô‡∏ó‡∏∂‡∏Å‡∏Å‡∏≤‡∏£‡∏ï‡∏±‡πâ‡∏á‡∏Ñ‡πà‡∏≤
        document.getElementById('saveSettings').addEventListener('click', function() {
            const showFloating = document.getElementById('showFloatingButton').checked;
            const folderName = document.getElementById('worldInfoFolder').value.trim() || 'AutoMemory';
            
            // ‡πÄ‡∏Å‡πá‡∏ö‡πÉ‡∏ô localStorage
            const settings = {
                show_floating_button: showFloating,
                auto_memory_world_info_folder: folderName
            };
            
            localStorage.setItem('AutoMemory_settings', JSON.stringify(settings));
            alert('‡∏ö‡∏±‡∏ô‡∏ó‡∏∂‡∏Å‡∏Å‡∏≤‡∏£‡∏ï‡∏±‡πâ‡∏á‡∏Ñ‡πà‡∏≤‡πÅ‡∏•‡πâ‡∏ß! ‡∏£‡∏µ‡πÄ‡∏ü‡∏£‡∏ä‡∏´‡∏ô‡πâ‡∏≤‡πÄ‡∏û‡∏∑‡πà‡∏≠‡πÉ‡∏´‡πâ‡∏Å‡∏≤‡∏£‡∏ï‡∏±‡πâ‡∏á‡∏Ñ‡πà‡∏≤‡∏°‡∏µ‡∏ú‡∏•');
        });
        
        // ‡πÇ‡∏´‡∏•‡∏î‡∏Å‡∏≤‡∏£‡∏ï‡∏±‡πâ‡∏á‡∏Ñ‡πà‡∏≤‡∏ó‡∏µ‡πà‡∏ö‡∏±‡∏ô‡∏ó‡∏∂‡∏Å‡πÑ‡∏ß‡πâ
        function loadSavedSettings() {
            try {
                const savedSettings = JSON.parse(localStorage.getItem('AutoMemory_settings')) || {};
                document.getElementById('showFloatingButton').checked = savedSettings.show_floating_button !== false;
                document.getElementById('worldInfoFolder').value = savedSettings.auto_memory_world_info_folder || 'AutoMemory';
            } catch (error) {
                console.error('‡πÑ‡∏°‡πà‡∏™‡∏≤‡∏°‡∏≤‡∏£‡∏ñ‡πÇ‡∏´‡∏•‡∏î‡∏Å‡∏≤‡∏£‡∏ï‡∏±‡πâ‡∏á‡∏Ñ‡πà‡∏≤‡πÑ‡∏î‡πâ:', error);
            }
        }
        
        loadSavedSettings();
        updateMemoryCount();
        
        // ‡∏≠‡∏±‡∏õ‡πÄ‡∏î‡∏ó‡∏ó‡∏∏‡∏Å 30 ‡∏ß‡∏¥‡∏ô‡∏≤‡∏ó‡∏µ
        setInterval(updateMemoryCount, 30000);
    });
</script>            }
        });
    });
</script>
